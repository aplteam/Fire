<!DOCTYPE html>
<html lang="en" style="scroll-behavior:smooth" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>Tatin User Setting</title>
<style media="screen">
html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}body{margin:0;}article,aside,footer,header,nav,section{display:block;}h1{font-size:2em;margin:0.67em 0;}figcaption,figure,main{display:block;}figure{margin:1em 40px;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace, monospace;font-size:1em;}a{background-color:transparent;-webkit-text-decoration-skip:objects;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:inherit;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace, monospace;font-size:1em;}dfn{font-style:italic;}mark{background-color:#ff0;color:#000;}small{font-size:0.8em;}sub,sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}audio,video{display:inline-block;}audio:not([controls]){display:none;height:0;}img{border-style:none;}svg:not(:root){overflow:hidden;}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:1em;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,html [type="button"], [type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{display:inline-block;vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details, menu{display:block;}summary{display:list-item;}canvas{display:inline-block;}template{display:none;}[hidden]{display:none;}body{margin:0;font-family:"Bookman Old Style", "Callisto MT", Bookman, "Goudy Old Style", Garamond, serif;background-color:#fdfdfd;font-size:18px;line-height:1.4;max-width:900px;padding:0.83em;color:#292929;word-wrap:break-word;overflow-wrap:break-word;}h1, h2, h3, h4, h5, h6{color:#404040;font-weight:800;padding-left:0;}h1, h2, h3, h4, h5, h6{font-family:"Century Gothic", Verdana, "Sans";}h1, h2, h3, h4, p{margin-bottom:0.88em;}h1{font-size:1.8em;margin:0.27em 0 1.11em 0;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:1em;background-color:inherit;}h2{font-size:1.44em;margin:0.55em 0 0.55em 0;padding-top:0.55em;border-bottom:1px solid Silver;}h3{margin:0;margin-top:0.55em;font-size:1.22em;}nav h3{font-size:0.88em;margin-left:0.83em;margin-bottom:0.27em;}h4{font-size:1em;margin:0;margin-top:0.55em;}h5{font-size:0.94em;margin:0;margin-top:0.66em;padding:0;}h6{font-size:0.88em;margin:0;margin-top:0.66em;padding:0;}a{color:#0099ff;margin:0;padding:0;vertical-align:baseline;}a:visited{color:purple;}a.autoheader_anchor{text-decoration:none;}ul{list-style-type:disc;}dd{padding-top:0.25em;}p.first_dd{padding-top:0.25em;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:1.38em;margin-bottom:0.55em;}ul > li{margin-left:2.5em;}ol > li{margin-left:2.5em;}li ul{margin-left:0.55em;}li ul{margin-left:0.27em;}li p{padding:1px 0 0 0;margin:0.55em 0 0.27em 0;line-height:1.3;}ul, ol{line-height:1.3;padding:0.33em 0 0 0;margin:0.5em;margin-top:1.2em;}p{line-height:1.2;padding:0.40em 0 0 0;margin:0;}pre{overflow:scroll;padding:0.55em 0.27em;margin:0.55em 0 0.55em 0 !important;background-color:#faebd7;color:#3e3e3e;border:1px Silver dashed;display:block;font-family:APLFont, monospace;font-weight:normal;white-space:pre-wrap;}pre > code{line-height:1.2;border:0;padding:0;margin:0;background-color:inherit;color:inherit;font-weight:inherit;white-space:pre-wrap;}td code{padding:0;}a code{padding:0;font-size:1em;}nav code{background-color:inherit;font-weight:400;color:inherit;}code{font-family:APLFont, monospace;color:Black;font-weight:800;line-height:1.2;font-size:0.88em;margin:0;color:#950000;padding:0 0.16em;}tbody tr:nth-child(even){background-color:#F0F0F0;}th{background-color:#E6E6E6;color:black;}th, td{padding:0.16em 0.55em;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table{border-color:Black;margin:1.5em 0;border:2px black;border-collapse:collapse;font-family:APLFont;font-size:0.88em;line-height:1.2;border:1px solid Gray;}li > table{margin:0.55em 0 0.55em 0;}tr{margin:1.11em;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:0.27em solid silver;padding-left:0.27em;margin:0.83em 0.27em 0.83em 0.55em;}blockquote ul li{margin-left:1.38em;}blockquote ol li{margin-left:1.38em;}li > blockquote{margin-left:0;}nav{background-color:#f5f5f5;border:1px solid Black;padding:0.55em;margin:0.55em;margin-right:0;box-shadow:0.27em 0.27em 0.27em Gray;overflow:hidden;clear:both;}nav#main_nav{position:fixed;top:0;right:0.55em;float:none;width:auto;}nav#main_nav_no_collapse li{font-size:0.77rem;}nav#main_nav_no_collapse li{line-height:1.5;}nav ul{list-style-type:none;margin:0 0 0.11em 0;padding:0;}nav a:visited{color:black;}nav ul li{margin-bottom:0.16em;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:0.75rem;line-height:1.3;padding:0;margin-top:0;margin-bottom:0;margin-left:0.83em;}nav p{font-weight:bold;font-size:0.75rem;padding-top:0;}dl{margin-top:0.1em;margin-bottom:0.1em;}dt{margin-top:0.75em;margin-bottom:0.1em;font-weight:800;}label#hide_toc_label{font-size:0.8em;}.toc-container{position:relative;height:auto;}div.toc-container h1{font-size:0.88em;margin:0.27em 0 0.27em 0;}[type="checkbox"]{position:absolute;left:-9999px;}label{display:block;width:100%;height:1.1em;cursor:pointer;top:0;padding-left:1.1em;}label:before{content:'Table of contents \25BC';font-weight:bold;font-size:90%;padding-bottom:0;}[type="checkbox"] ~ div{display:none;}[type="checkbox"]:checked ~ div{display:block;margin-top:1.1em;}[type="checkbox"]:checked + label{top:100%;}[type="checkbox"]:checked + label:before{content:'Table of contents ▲';}div#footnotes_div p{line-height:1;padding-bottom:0;padding-top:0;}div#footnotes_div ol{padding-top:0;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_display{display:none;}.red{color:red;}.center{text-align:center;margin-left:auto;margin-right:auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}img{margin-top:0.55em;margin-bottom:0.27em;}div.leanpub{padding:0.83em 0.55em 1.11em 0;margin:0.55em 0 0 0.27em;overflow:auto;}div.leanpub_A{border:1px solid black;background-color:#f1f1f1;padding:0.55em;margin:1.11em 0 0.83em 0;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:0.27em 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 1.11em 0.27em 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub img{float:left;padding:0;margin:0.55em 1.11em 0 0;clear:both;}div.leanpub tbody *{background-color:transparent;}div.leanpub p{padding:0.17em 0 0 0;margin:0;}span.leanpub_code{color:Red;}div.leanpub p{display:block;padding:0.44em 0 0 0;}div.leanpub > div{margin-left:2.27em;}.print_only{display:none;}
</style>
<style media="print">
@page{margin:25mm 20mm 25mm 20mm;}body{font-family:"Bookman Old Style", "Callisto MT", Bookman,"Goudy Old Style", Garamond, serif;font-size:9pt;line-height:1.2;}h1{font-size:170%;}h2{font-size:110%;}h3{font-size:110%;}h4{font-size:105%;}h5{font-size:100%;}h6{font-size:95%;}h1{margin:0 0 20pt 0;}h2{margin:15pt 0 3pt 0;}h3{margin:10pt 0 0pt 0;}h4{margin:10pt 0 0pt 0;}h5{margin:9pt 0 0pt 0;}h6{margin:9pt 0 0pt 0;}h1, h2, h3, h4, h5, h6{color:black;font-family:"Century Gothic", Verdana, "Sans";page-break-after:avoid;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;}h2{border-bottom:1pt solid Silver;padding-bottom:2pt;}.h_tag{page-break-after:avoid;break-after:avoid;}abbr[title]{border-bottom:0;text-decoration:none;}a{color:black;margin:0;padding:0;vertical-align:baseline;text-decoration:none;font-style:italic;}a.autoheader_anchor{text-decoration:none;font-style:normal;page-break-after:avoid;break-after:avoid;}ul{list-style-type:square;}ul, ol{padding:0;margin:0;margin-top:10pt;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:13pt;margin-bottom:5pt;}ul > li{margin-left:25pt;}ol > li{margin-left:25pt;}li ul{margin-left:5pt;}li ul{margin-left:3pt;}li p{padding:1pt 0 0 0;margin:5pt 0 3pt 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:4pt 0 0 0;margin:0;color:black;}ul, ol{margin-top:0.75em;}pre{padding:3pt;margin:5pt 0;white-space:pre-wrap;background-color:#FAFAFA;border:1pt Silver solid;display:block;font-family:APLFont, monospace;page-break-inside:avoid;}pre code{background-color:#FAFAFA;color:Black;padding:0;margin:0 0 -6pt 0;line-height:1.1;border:0;white-space:pre-wrap;}code{font-family:APLFont, monospace;line-height:1.2;font-size:9pt;padding:3pt 1pt 3pt 1pt;color:#950000;padding:3pt 0pt 3pt 0pt;margin:0;}tbody th, tfoot tr{background-color:#e6e6e6;}tbody tr:nth-child(even){background-color:#fafafa;}th{background-color:#F0F0F0;}th, td{padding:1pt 5pt;border:1px solid #E3E3E3;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table code{font-style:normal;padding-left:0;padding-right:0;}table{margin:1.5em 0;font-family:APLFont;font-size:9pt;padding:0;border:1pt solid silver;border-collapse:collapse;}li > table{margin:10pt 0 10pt 0;}tr{margin:20pt;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:5pt solid silver;padding-left:5pt;margin:8pt 3pt 8pt 8pt;}nav{background-color:#f8f8f8;border:1pt solid Gray;width:auto;float:right;padding:5pt 5pt 5pt 0;margin:5pt 0 5pt 5pt;page-break-inside:avoid;break-inside:avoid;clear:both;overflow:hidden;}nav *{font-size:75%;}nav ul{list-style-type:none;margin:0 0 2pt 0;padding:0;}nav ul li{margin-bottom:0;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:9pt;line-height:1;padding:0;margin-top:0;margin-bottom:0;margin-left:8pt;}dl{margin-top:0;margin-bottom:10pt;}dt{margin-top:10pt;margin-bottom:0;font-weight:800;page-break-inside:avoid;}dd{margin-top:2pt;}label#hide_toc_label{font-size:65%;}.toc-container{position:relative;height:auto;margin-top:2pt;background-color:inherit;}.toc-container h3{margin:0 0 2pt 7pt;}[type="checkbox"]{display:none;}label{display:block;width:100%;height:1.1em;top:0;padding-left:10pt;}label:before{content:'Table of contents';font-weight:bold;font-size:140%;padding-bottom:10pt;}a.external_link::before{content:" 🌎";}a.bookmark_link::before{content:" ➯";}a.mailto_link::before{content:" ✉"}nav a.bookmark_link{font-style:normal;}nav p{margin-left:10pt;font-weight:bold;font-size:9pt;}nav a{font-style:normal;}nav a.bookmark_link::before{content:"";}div#footnotes_div a::before{content:"";}div#footnotes_div a{font-style:normal;}div#footnotes_div{page-break-inside:avoid;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_print{display:none;}.red{color:red;}.center{text-align:center;margin:0 auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}.avoid_page_break{page-break-inside:avoid;}.page_break_before{page-break-before:always;}div.leanpub{margin:10pt 0 10pt 8pt;page-break-inside:avoid;}div.leanpub_A{border:1pt solid black;background-color:#f9f9f9;padding:5pt;margin:10pt 0 10pt 0;page-break-inside:avoid;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:3pt 0 0 0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:3pt 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 10pt 2pt 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub > div > h1:first-child{padding-top:5pt;}div.leanpub img{float:left;padding:0;margin:5pt 10pt 0 0;clear:both;}div.leanpub p{padding:3pt 0 0 0;margin:0;}span.leanpub_code{font-weight:bold;}div.leanpub p{display:block;padding:8pt 0 0 0;}div.leanpub > div{margin-left:35pt;}sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;top:-0.4em;}
</style>

</head>
<body>
<nav id="main_nav">
<input type="checkbox" id="hide_toc">
<label id="hide_toc_label" for="hide_toc"></label>
<div class="toc-container">
<ul>
<li><a href="#Tatin-User-Settings">Tatin User Settings</a>
<ul>
<li><a href="#Introduction">1. Introduction</a>
<ul>
<li><a href="#The-default-file">1.1. The default file</a></li>
<li><a href="#Where-does-the-file-live">1.2. Where does the file live?</a></li>
<li><a href="#Whats-the-name-of-the-file">1.3. What's the name of the file?</a></li>
<li><a href="#May-I-edit-the-file">1.4. May I edit the file?</a></li>
<li><a href="#What-does-Tatin-do-at-start-up-time">1.5. What does Tatin do at start-up time?</a></li>
<li><a href="#Synchronizing-file-and-workspace">1.6. Synchronizing file and workspace</a></li>
<li><a href="#Summary">1.7. Summary</a></li>
</ul></li>
<li><a href="#Adding-and-removing-Registries">2. Adding and removing Registries</a>
<ul>
<li><a href="#What-have-we-got">2.1. What have we got?</a></li>
</ul></li>
<li><a href="#Putting-the-user-config-file-elsewhere">3. Putting the user config file elsewhere</a>
<ul>
<li><a href="#Make-the-switch-permanent">3.1. Make the switch permanent</a>
</li></ul></li>
</li></ul></li>
</ul>
</div>
</nav>
<div class="h_tag">
<a href="#Tatin-User-Settings" id="Tatin-User-Settings" class="autoheader_anchor">
<h1 data-id="Tatin-User-Settings">Tatin User Settings</h1>
</a>
</div>
<div class="h_tag">
<a href="#Introduction" id="Introduction" class="autoheader_anchor">
<h2 data-id="Introduction">1. Introduction</h2>
</a>
</div>
<p>Tatin uses a file to remember all Tatin Registries you want to work with, and possibly other user-specific settings as well. We refer to this file as the user settings file.</p>
<p>When you start using Tatin for the very first time with 18.0 or 18.2 (when Tatin is not part of a standard installation of Dyalog APL) there is no such file, and therefore Tatin will create one in a specific location.</p>
<p>Once Tatin is installed when you fire up an instance of Dyalog APL the contents of the file is used to instantiate the <code>Tatin.UserSettings</code> class. The instance is assigned to <code>⎕SE.Tatin.MyUserSettings</code>. From then on any changes to the file with an external editor <em>do not</em> affect <code>⎕SE.Tatin.MyUserSettings</code>!</p>
<p><code>⎕SE.Tatin.MyUserSettings</code> provides a number of properties that can be questioned as well as a number of methods that can be issued in order to manipulate the user settings.</p>
<p>This call:</p>
<pre><code>      ]Tatin.Listregistries
 URI         Alias                    Port  Priority
 ----------  -----------------------  ----  --------
 tatin       https://tatin.dev/          0       100
 tatin-test  https://test.tatin.dev/     0         0
</code></pre>
<p>Shows most of the data that is saved in the user settings except the API key(s).</p>
<p>If you would like to see the API keys as well specify the <code>-full</code> flag.</p>
<div class="h_tag">
<a href="#The-default-file" id="The-default-file" class="autoheader_anchor">
<h3 data-id="The-default-file">1.1. The default file</h3>
</a>
</div>
<p>That default file will have two Tatin Registries defined in it:</p>
<ul>
<li>the principal Tatin server, available via the URL <code>https://tatin.dev/</code>.
<p>It has an alias <code>tatin</code> assigned to it, so you can address it as <code>[tatin]</code> with all user commands that require a Registry as parameter.</p></li>
<li>the Tatin Test server, available via the URL <code>https://test.tatin.dev/</code>.
<p>It has an alias <code>test-tatin</code> assigned to it, so you can address it as <code>[test-tatin]</code> with all user commands that require a Registry as parameter.</p>
<p>It has a priority of <code>0</code> assigned to it which means that it will <em>not</em> participate in Registry scans.</p>
<p>Registry scans are performed by Tatin when you ask for a package but do not specify a Registry. Tatin scans all Registries in order of their priorities (highest one first) but ignores those with a priority that is <code>0</code>.</p></li>
</ul>
<div class="leanpub_A">
<h3>Registry scans</h3>
<p>What happens when a Tatin server is down when Tatin attempts to interrogate it?</p>
<p>That depends on how Tatin is called:</p>
<ul>
<li>From a user command Tatin will stop and ask you what to do; you have three options:
<ul>
<li>Try again</li>
<li>Skip that registry and carry on</li>
<li>Cancel the whole operation</li>
</ul></li>
<li>If it is an API call then an error is thrown</li>
</ul>
</div>

<div class="h_tag">
<a href="#Where-does-the-file-live" id="Where-does-the-file-live" class="autoheader_anchor">
<h3 data-id="Where-does-the-file-live">1.2. Where does the file live?</h3>
</a>
</div>
<p>This default file will be created in the user's home folder; the API function <code>⎕SE.Tatin.GetUserHomeFolder''</code> does return that folder.</p>
<div class="h_tag">
<a href="#Whats-the-name-of-the-file" id="Whats-the-name-of-the-file" class="autoheader_anchor">
<h3 data-id="Whats-the-name-of-the-file">1.3. What's the name of the file?</h3>
</a>
</div>
<p>The name of the file is <code>tatin-client.json</code>.</p>
<div class="h_tag">
<a href="#May-I-edit-the-file" id="May-I-edit-the-file" class="autoheader_anchor">
<h3 data-id="May-I-edit-the-file">1.4. May I edit the file?</h3>
</a>
</div>
<p>Of course you are free to edit that file with any editor. However, keep in mind that you are in charge for making sure that the contents of the file is valid JSON5[<a href="#fnref1" class="footnote_link"><sup>1</sup></a>]: if it's not, Tatin will crash.</p>
<p>If you are familiar with JSON5 syntax and want to edit the file it is recommended to use:</p>
<pre><code>]TATIN.Usersettings -edit</code></pre>
<p>This will allow you to edit the file contents, but Tatin will check it afterwards in order to make sure that nothing invalid goes ever into the file.</p>
<p>Note that Dyalog 18.2 and later recognize JSON5 and highlight any syntax errors.</p>
<div class="h_tag">
<a href="#What-does-Tatin-do-at-start-up-time" id="What-does-Tatin-do-at-start-up-time" class="autoheader_anchor">
<h3 data-id="What-does-Tatin-do-at-start-up-time">1.5. What does Tatin do at start-up time?</h3>
</a>
</div>
<p>When Tatin is initialized[<a href="#fnref2" class="footnote_link"><sup>2</sup></a>] it creates an instance of the <code>UserSettings</code> class with the name <code>MyUserSettings</code> which lives in <code>⎕se.Tatin</code>.</p>
<p>If the constructor does not get a fully qualified name of the user settings file as an argument then it performs two steps:</p>
<ol start="1">
<li>It looks for a file <code>.tatin</code> in the user's home folder.
<p>If the file exists and is not empty then it is expected to point to a user settings file, and Tatin will go for that file.</p>
<p>We will discuss soon under which circumstances such a file might be useful.</p></li>
<li>In case there is no file <code>.tatin</code> in that folder, or the file is empty, Tatin will look for a user settings file in the default folder.
<ul>
<li>If that file exists then Tatin will instantiate it</li>
<li>If the file does not exist then it will be created with default settings</li>
</ul></li>
</ol>
<div class="h_tag">
<a href="#Synchronizing-file-and-workspace" id="Synchronizing-file-and-workspace" class="autoheader_anchor">
<h3 data-id="Synchronizing-file-and-workspace">1.6. Synchronizing file and workspace</h3>
</a>
</div>
<div class="h_tag">
<a href="#Changes-made-to-the-file" id="Changes-made-to-the-file" class="autoheader_anchor">
<h4 data-id="Changes-made-to-the-file">1.6.1. Changes made to the file</h4>
</a>
</div>
<p>If you change the file that Tatin has instantiated by editing it with an external editor, and have an APL session up and running, then your change does not have an impact on the APL session.</p>
<p>However, you can force Tatin to bring the session in line with the file by executing:</p>
<pre><code>      ]TATIN.Init</code></pre>
<div class="h_tag">
<a href="#Changes-made-in-the-workspace" id="Changes-made-in-the-workspace" class="autoheader_anchor">
<h4 data-id="Changes-made-in-the-workspace">1.6.2. Changes made in the workspace</h4>
</a>
</div>
<p>If you manipulate the instance in the workspace, then the changes won't be written to file. You need to call the monadic <code>Save</code> method (with a <code>1</code> as right argument) to make your changes permanent.</p>
<div class="h_tag">
<a href="#Comments" id="Comments" class="autoheader_anchor">
<h4 data-id="Comments">1.6.3. Comments</h4>
</a>
</div>
<p>Note that JSON5 allows two different types of comments:</p>
<div class="h_tag">
<a href="#Block-comments" id="Block-comments" class="autoheader_anchor">
<h5 data-id="Block-comments">1.6.3.1. Block comments</h5>
</a>
</div>
<p>Everything between <code>/*</code> and <code>*/</code> is recognized as a comment, like this:</p>
<pre><code>/*
  This is a comment that...
  stretches over several lines
*/.</code></pre>
<div class="h_tag">
<a href="#Line-comments" id="Line-comments" class="autoheader_anchor">
<h5 data-id="Line-comments">1.6.3.2. Line comments</h5>
</a>
</div>
<p>This is an example for a line that is recognized as a comment:</p>
<pre><code>// This is a comment line</code></pre>
<div class="h_tag">
<a href="#Summary" id="Summary" class="autoheader_anchor">
<h3 data-id="Summary">1.7. Summary</h3>
</a>
</div>
<p>In most scenarios you will probably be happy with having just one user settings file for Tatin, and having it in its default location.</p>
<p>You may however want to have your own Tatin Registries, for example for private projects.</p>
<div class="h_tag">
<a href="#Adding-and-removing-Registries" id="Adding-and-removing-Registries" class="autoheader_anchor">
<h2 data-id="Adding-and-removing-Registries">2. Adding and removing Registries</h2>
</a>
</div>
<p>You can manipulate the <code>MyUserSettings</code> instance via its methods.</p>
<p>We are now going to add a registry, list all registries and then delete that registry, getting us back to where we started from.</p>
<div class="h_tag">
<a href="#What-have-we-got" id="What-have-we-got" class="autoheader_anchor">
<h3 data-id="What-have-we-got">2.1. What have we got?</h3>
</a>
</div>
<p>Let's list all registries currently defined:</p>
<pre><code>      ⎕se.Tatin.MyUserSettings.ListRegistries 0
URI                     Alias       Port  Priority
------------------      -----       ----  --------
https://tatin.dev/      tatin       0     100
https://test.tatin.dev/ tatin-test  0       0</code></pre>
<p>This is because originally Tatin only knows about the principal Tatin server and its cousin, the test server.</p>
<p>Note that the API key is not listed when a zero is provided as right argument.</p>
<p>Let's add a made-up registry.</p>
<div class="h_tag">
<a href="#Create-an-instance-of-the-DefineRegistry-class" id="Create-an-instance-of-the-DefineRegistry-class" class="autoheader_anchor">
<h4 data-id="Create-an-instance-of-the-DefineRegistry-class">2.1.1. Create an instance of the <code>DefineRegistry</code> class.</h4>
</a>
</div>
<p>Let's assume that you work for a company “MyCompany”, and that this company entertains a Tatin Server with the URL <code>https://tatin.mycompany.com</code>.</p>
<p>In order to add that Registry to the user settings file you must first instantiate the <code>DefineRegistry</code> class. You may specify the URL and the alias in several ways; for details on the <code>DefineRegistry</code> class execute this:</p>
<pre><code>]adoc ⎕se.Tatin.DefineRegistry</code></pre>
<p>We will pass a simple text vector that specifies the alias (between <code>[]</code>) and the URI:</p>
<pre><code>      #.myReg←⎕NEW ⎕SE.Tatin.DefineRegistry (,⊂'[myc]https://tatin.mycompany.com')
      #.myReg.varsList
 uri  alias  port  api_key  priority
      ]box on
      {⍵,⍪#.myReg.(⍎¨⍵)}'uri' 'alias' 'port' 'api_key' 'priority'
┌────────┬────────────────────────────┐
│uri     │https://tatin.mycompany.com/│
├────────┼────────────────────────────┤
│alias   │myc                         │
├────────┼────────────────────────────┤
│port    │0                           │
├────────┼────────────────────────────┤
│api_key │                            │
├────────┼────────────────────────────┤
│priority│[Null]                      │
└────────┴────────────────────────────┘
      ]box off</code></pre>
<div class="h_tag">
<a href="#Settings-in-the-file" id="Settings-in-the-file" class="autoheader_anchor">
<h4 data-id="Settings-in-the-file">2.1.2. Settings in the file</h4>
</a>
</div>
<ul>
<li><code>uri</code> and <code>alias</code> are already set by the constructor.</li>
<li><code>port</code> is 0 which means that it will fall back to 80 for <code>http://</code> and 443 for <code>https://</code>.</li>
<li><code>priority</code> decides in which order Registries are scanned in case no Registry was provided. The Registry with the highest number is scanned first, and the first hit wins.
<p><code>⎕NULL</code> will be converted once the instance is added to the user settings, see there.</p>
<p>Note that a priority of <code>0</code> or less means that the registry will <strong>not</strong> participate in a Registry scan.</p></li>
<li><code>api_key</code> must be set only when the Registry is managed by a Tatin server <em>and</em> you want to publish packages, or delete packages (if that is permitted by that Tatin server at all) and credentials are required for those operations.</li>
</ul>
<div class="h_tag">
<a href="#Adding-the-Registry" id="Adding-the-Registry" class="autoheader_anchor">
<h4 data-id="Adding-the-Registry">2.1.3. Adding the Registry</h4>
</a>
</div>
<p>Adding a registry is achieved by calling the <code>AddRegistry</code> method, and providing an instance of the <code>DefineRegistry</code> class as argument:</p>
<pre><code>      ⎕se.Tatin.MyUserSettings.AddRegistry #.myReg</code></pre>
<p>Now we would expect two Registries:</p>
<pre><code>      ↑⎕se.Tatin.MyUserSettings.registries.(alias uri priority)
 tatin       https://tatin.dev/           100
 myc         https://tatin.mycompany.com/  90
 tatin-test  https://test.tatin.dev/        0</code></pre>
<p>The priority is not <code>⎕NULL</code> anymore but 90: any <code>⎕NULL</code> is replaced by the lowest number yet minus 10.</p>
<div class="leanpub_A">
<h3>Regarding priorities</h3>
<p>What happens when you add a Registry with <code>priority</code> being <code>⎕NULL</code> and the lowest Registry so far is 1?</p>
<p>In that case Tatin assigns new values to all Registries except those with a priority of zero which will remain untouched.</p>
<p>The new priorities will not change the order of the priorities, and the lowest one will be 100 or greater.</p>
</div>

<p>So far we have changed the user settings in the workspace, <em>not</em> on file. This allows you to experiment with certain settings without making the change permanent; other sessions won't be affected.</p>
<p>If you want to make your changes permanent you must call the <code>Save</code> method and provide a 1 as right argument.</p>
<div class="h_tag">
<a href="#Putting-the-user-config-file-elsewhere" id="Putting-the-user-config-file-elsewhere" class="autoheader_anchor">
<h2 data-id="Putting-the-user-config-file-elsewhere">3. Putting the user config file elsewhere</h2>
</a>
</div>
<p>There might be scenarios when the default location for the user config file is not suitable for you.</p>
<ul>
<li>If you cannot make frequent changes to the Tatin user settings file in its default location due to, say,  company constraints, then of course it needs to go elsewhere.</li>
<li>Your computer is used by several people, and they all (or at least two of them) need access to the Tatin user settings file.
<p>You could still use the default location, but because that location is user specific, every user would require her own user settings file, which is something you might or might not want to avoid.</p></li>
</ul>
<p>In the aforementioned cases as well as other scenarios you need more freedom than what is provided by default.</p>
<p>For that you must create a user settings file in a specific location. In order to achieve that we re-instantiate the class <code>UserConfig</code>, and we provide a path to the folder where the file should live:</p>
<pre><code>      ⎕SE.Tatin.MyUserSettings←⎕NEW ⎕SE.Tatin.UserSettings (,⊂'/path2/user_config_file/')
      ⍴⎕←1 ⎕se.Tatin.ListRegistries 0
 https://tatin.dev       tatin      100
 https://test.tatin.dev  tatin-test   0
2 3
      ⍴⎕←⎕se.Tatin.MyUserSettings.ListRegistries 0
 Alias  URI                  Port  Priority  API-key
 -----  ------------------   ----  --------  -------
 tatin  https://tatin.dev/      0       100  ***
 test-tatin  https://tatin.dev/ 0       100  ***
4 5</code></pre>
<p>Notes:</p>
<ul>
<li>We use the same name as before (<code>MyUserSettings</code>) because all Tatin user commands as well as all Tatin API functions assume the existence of an instance of the class <code>UserSettings</code> with that name.</li>
<li>The API key is replaced by asterisks unless you specify a <code>1</code> as right argument to <code>ListRegistries</code></li>
<li>When you fire up a new session of Dyalog APL right  now, it would still look for the user settings file in its standard location.</li>
</ul>
<div class="h_tag">
<a href="#Make-the-switch-permanent" id="Make-the-switch-permanent" class="autoheader_anchor">
<h3 data-id="Make-the-switch-permanent">3.1. Make the switch permanent</h3>
</a>
</div>
<p>In order to make this user settings file the default file, meaning that this file will be instantiated the next time Dyalog APL is fired up, we need to make sure that a file <code>.tatin</code> in the default folder (that's the one returned by <code>⎕SE.Tatin.GetUserHomeFolder''</code>) contains a path pointing to that folder.</p>
<p>You can do this yourself, but you can also ask the instance for doing the job for you:</p>
<pre><code>      ⎕SE.Tatin.MyUserSettings.MakeDefaultFile</code></pre>
<p>From now on the file <code>MyUserSettings.path2config</code> is pointing to will be used to determine the user settings.</p>
<div id="footnotes_div">
<hr>
<p><strong>Footnotes</strong></p>
<ol>
<li id="fnref1"><p>Tatin uses <a href="https://json5.org/" class="external_link" title="Link to the JSON5 web site">JSON5</a> rather than JSON.</p><a href="#fnref1" class="footnote_anchor"></a>
<li id="fnref2"><p>Tatin will be initialized either explicitly or as a side effect when the first Tatin user command is issued. See <a href="./InstallingAndUpdatingTheTatinClient.html" class="external_link" title="InstallingAndUpdatingTheTatinClient.html">“Installing and updating the Tatin Client”</a> for details.</p><a href="#fnref2" class="footnote_anchor"></a>
</ol>
</div>
</body>
</html>
