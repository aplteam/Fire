<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>Meddy</title>
<style media="screen">
h3html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}body{margin:0;}article,aside,footer,header,nav,section{display:block;}h1{font-size:2em;margin:0.67em 0;}figcaption,figure,main{display:block;}figure{margin:1em 40px;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace, monospace;font-size:1em;}a{background-color:transparent;-webkit-text-decoration-skip:objects;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:inherit;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace, monospace;font-size:1em;}dfn{font-style:italic;}mark{background-color:#ff0;color:#000;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}audio,video{display:inline-block;}audio:not([controls]){display:none;height:0;}img{border-style:none;}svg:not(:root){overflow:hidden;}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,html [type="button"], [type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{display:inline-block;vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details, menu{display:block;}summary{display:list-item;}canvas{display:inline-block;}template{display:none;}[hidden]{display:none;}body{margin:0;font-family:Verdana, "Bitstream Vera Sans", "DejaVu Sans", Tahoma, Geneva, Arial, Sans-serif;background-color:#fdfdfd;font-size:18px;line-height:1.4;max-width:1100px;padding:15px;}h1, h2, h3, h4, h5, h6{padding-left:0;}h1, h2, h3, h4, h5, h6{font-family:"Arial Black", Arial, Helvetica, sans-serif;color:black;}h1, h2, h3, h4, p{margin-bottom:16px;}h1{font-size:170%;margin:20px 0 20px 0;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;background-color:inherit;}h2{font-size:145%;margin:10px 0 10px 0;padding-top:10px;border-bottom:1px solid Black;}h3{margin:0;margin-top:25px;margin-bottom:5px;font-size:22px;}h4{font-size:115;margin:0;margin-top:20px;}h5{font-size:100%;margin:0;margin-top:12px;padding:0;}h6{font-size:95%;margin:0;margin-top:12px;padding:0;}p+p{text-indent:1em;}a{color:#0099ff;margin:0;padding:0;vertical-align:baseline;}a:visited{color:purple;}a.autoheader_anchor{text-decoration:none;}ul{list-style-type:disc;}p, ul, ol{line-height:1.4;padding:10px 0 0 0;margin:0;color:#505050;}ul, ol{padding:0;margin:15px 15px 10px 20px;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:25px;margin-bottom:10px;}ul > li{margin-left:20px;}li ul{margin-left:10px;}li ul{margin-left:5px;}li p{padding:1px 0 0 0;margin:10px 0 5px 0;line-height:1.3;}pre{overflow:scroll;padding:10px 5px;margin:20px 0 20px 0;background-color:black;color:#00d202;border:1px Silver solid;display:block;font-family:APLFont, monospace;}pre > code{line-height:1.2;border:0;padding:0;margin:0;background-color:inherit;color:inherit;}a code{padding:0;font-size:18px;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:100%;}nav code{background-color:inherit;font-weight:400;font-size:14px;}code{font-family:APLFont, monospace;background-color:#e7e7e7;color:Black;font-weight:800;line-height:1.2;font-size:16px;margin:0;padding:3px 8px 3px 8px;}div.leanpub table p > code{background-color:#e7e7e7 !important;}tbody th, tfoot tr{background-color:silver;}tbody tr:nth-child(even){background-color:#DEDEDE;}th{background-color:Black;color:white;font-weight:bold;}th, td{padding:3px 10px;}th > code{color:White;background-color:Black;}table{border-color:Black;margin:20px 0 20px 0;border:2px black;border-collapse:collapse;font-family:APLFont;font-size:16px;line-height:1.2;border:2px solid Black;}td > code{background-color:transparent;}li > table{margin:10px 0 10px 0;}tr{margin:20px;}tfoot td{font-weight:bold;}blockquote{border-left:5px solid silver;padding-left:5px;margin:15px 5px 15px 10px;}blockquote ul li{margin-left:215px;}blockquote ol li{margin-left:25px;}li > blockquote{margin-left:0;}nav{background-color:#f5f5f5;border:1px solid Black;padding:10px;margin:20px 40px;box-shadow:5px 5px 5px Gray;overflow:hidden;}nav#main_nav{position:fixed;top:0;right:10px;float:none;width:auto;}nav#main_nav_no_collapse li{font-size:14px;}nav#main_nav_no_collapse li{line-height:1.5;}nav ul{list-style-type:none;margin:0 0 2px 0;padding:0;}nav a:visited{color:black;}nav ul li{margin-top:7px;margin-bottom:7px;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:11px;line-height:1.3;padding:0;margin-top:0;margin-bottom:0;margin-left:15px;}nav p{font-weight:bold;font-size:75%;padding-top:0;}dl{margin-top:0;margin-bottom:10px;}dt{margin-top:15px;margin-bottom:5px;font-weight:800;}label#hide_toc_label{font-size:80%;}.toc-container{position:relative;height:auto;}div.toc-container h3{font-size:16px;margin:10px 5px 10px 12px;}[type="checkbox"]{position:absolute;left:-9999px;}label{display:block;width:100%;height:1.1em;cursor:pointer;top:0;padding-left:10px;}label:before{content:'Table of contents (Show)';font-weight:bold;font-size:90%;padding-bottom:0;}[type="checkbox"] ~ div{display:none;}[type="checkbox"]:checked ~ div{display:block;margin-top:20px;}[type="checkbox"]:checked + label{top:100%;}[type="checkbox"]:checked + label:before{content:'Table of contents (Hide)';}div#footnotes_div p{line-height:1;padding-bottom:0;padding-top:0;}div#footnotes_div ol{padding-top:0;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("http://misc.aplteam.com/apl385.ttf") format("truetype");}.no_display{display:none;}.red{color:red;}img{margin-top:10px;margin-bottom:5px;}div.leanpub{padding:0 10px 0 0px;margin:20px 10px 20px 10px;overflow:auto;}div.leanpub_A{border:1px solid black;background-color:#f1f1f1;padding:10px;margin:30px 0 30px 0;}div.leanpub_A pre{margin:10px 0 5px 0;}div.leanpub h3, div.leanpub_A h3{font-size:120%;padding:0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:110%;padding:5px 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:5px 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:5px 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 20px 5px 0;}div.leanpub tbody *{background-color:transparent;}span.leanpub_code{color:Yellow;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub img{float:left;margin:10px 20px 0 0;clear:both;}div.leanpub p{display:block;padding:10px 0 0 0;}div.leanpub p+p{text-indent:0;}div.leanpub > div{margin-left:41px;}
</style>
<style media="print">
@page{margin:25mm 20mm 25mm 20mm;}body{font-family:"Bookman Old Style", "Callisto MT", Bookman, "Goudy Old Style", Garamond, serif;font-size:11pt;line-height:1.2;}h1{font-size:170%;}h2{font-size:110%;}h3{font-size:110%;}h4{font-size:105%;}h5{font-size:100%;}h6{font-size:95%;}h1{margin:0 0 20pt 0;}h2{margin:15pt 0 3pt 0;}h3{margin:10pt 0 0pt 0;}h4{margin:10pt 0 0pt 0;}h5{margin:9pt 0 0pt 0;}h6{margin:9pt 0 0pt 0;}h1, h2, h3, h4, h5, h6{color:black;font-family:"Arial Black";page-break-after:avoid;break-after:avoid;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;}h2{border-bottom:1pt solid Silver;padding-bottom:2pt;}.h_tag{page-break-after:avoid;break-after:avoid;}abbr[title]{border-bottom:0;text-decoration:none;}a{color:black;margin:0;padding:0;vertical-align:baseline;text-decoration:none;font-style:italic;}a.autoheader_anchor{text-decoration:none;font-style:normal;page-break-after:avoid;break-after:avoid;}ul{list-style-type:square;}ul, ol{padding:0;margin:0;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:13pt;margin-bottom:5pt;}ul > li{margin-left:10pt;}li ul{margin-left:5pt;}li ul{margin-left:3pt;}li p{padding:1pt 0 0 0;margin:5pt 0 3pt 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:4pt 0 0 0;margin:0;color:black;}pre{padding:3pt;margin:5pt 0;white-space:pre-wrap;background-color:#FBFBFB;border:1pt Silver solid;display:block;font-family:APLFont, monospace;page-break-inside:avoid;break-inside:avoid;-webkit-print-color-adjust:exact;}pre code{background-color:#FBFBFB;color:#950000;padding:0;margin:0 0 -6pt 0;line-height:1.1;border:0;}code{font-family:APLFont, monospace;line-height:1.2;padding:3pt 1pt 3pt 1pt;color:#950000;}tbody th, tfoot tr{background-color:#e6e6e6;}tbody tr:nth-child(even){background-color:#F5F5F5;}th{background-color:#EBEBEB;}th, td{padding:1pt 5pt;}table{margin:10pt 0;font-family:APLFont;padding:0;border:1pt solid silver;-webkit-print-color-adjust:exact;}li > table{margin:10pt 0 10pt 0;}tr{margin:20pt;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:5pt solid silver;padding-left:5pt;margin:8pt 3pt 8pt 8pt;}nav{background-color:#f8f8f8;border:1pt solid Gray;width:auto;float:right;padding:5pt 5pt 5pt 0;margin:5pt 0 5pt 5pt;page-break-inside:avoid;break-inside:avoid;}nav *{font-size:90%;}nav ul{list-style-type:none;margin:0 0 2pt 0;padding:0;}nav ul li{margin-bottom:0;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:9pt;line-height:1;padding:0;margin-top:0;margin-bottom:0;margin-left:8pt;}dl{margin-top:0;margin-bottom:10pt;}dt{margin-top:10pt;margin-bottom:0;font-weight:800;page-break-inside:avoid;break-inside:avoid;}dd{margin-top:2pt;}label#hide_toc_label{font-size:65%;}.toc-container{position:relative;height:auto;margin-top:5pt;}.toc-container h3{margin:0 0 7pt 7pt;}[type="checkbox"]{display:none;}label{display:block;width:100%;height:1.1em;top:0;padding-left:10pt;}label:before{content:'Table of contents';font-weight:bold;font-size:140%;padding-bottom:10pt;}a.external_link::before{content:" 🌎";}a.bookmark_link::before{content:" ➯";}a.mailto_link::before{content:" ✉"}nav a.bookmark_link{font-style:normal;}nav p{margin-left:10pt;font-weight:bold;font-size:9pt;}nav a{font-style:normal;}nav a.bookmark_link::before{content:"";}div#footnotes_div a::before{content:"";}div#footnotes_div a{font-style:normal;}div#footnotes_div{page-break-inside:avoid;break-inside:avoid;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("http://misc.aplteam.com/apl385.ttf") format("truetype");}.no_print{display:none;}.red{color:red;}.avoid_page_break{page-break-inside:avoid;break-inside:avoid;}div.leanpub{margin:15pt 0 10pt 8pt;page-break-inside:avoid;break-inside:avoid;}div.leanpub_A{border:1pt solid black;background-color:#f9f9f9;padding:5pt;margin:10pt 0 10pt 0;page-break-inside:avoid;break-inside:avoid;}div.leanpub h3, div.leanpub_A h3{font-size:120%;padding:3pt 0 0 0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:110%;padding:3pt 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:100%;padding:3pt 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:100%;padding:3pt 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 10pt 2pt 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub > div > h1:first-child{padding-top:5pt;}div.leanpub img{float:left;padding:0;margin:5pt 10pt 0 0;clear:both;}div.leanpub p{padding:3pt 0 0 0;margin:0;}span.leanpub_code{color:black;}div.leanpub p{display:block;padding:8pt 0 0 0;}div.leanpub > div{margin-left:35pt;}
</style>
<meta name="author" content="kai">
</head>
<body>
<nav id="main_nav_no_collapse">
<div class="toc-container">
<h3>Table of contents</h3>
<ul>
<li><a href="#Useful-regular-expressions">Useful regular expressions</a>
<ul>
<li><a href="#Dotted-names-and">Dotted names and <code>##</code></a></li>
<li><a href="#Finding-specific-numbers">Finding specific numbers</a></li>
<li><a href="#Find-a-word">Find a word</a>
</li></ul></li>
</ul>
</div>
</nav>
<div class="h_tag">
<a href="#Useful-regular-expressions" id="Useful-regular-expressions" class="autoheader_anchor">
<h1>Useful regular expressions</h1>
</a>
</div>
<p>This document aims to collect regular expressions that are particularly useful to the APL programmer.</p>
<p>This is by no means an introduction into regular expressions. It just aims to give some tips for useful regular expressions, although it tries to explain how they work.</p>
<div class="h_tag">
<a href="#Dotted-names-and" id="Dotted-names-and" class="autoheader_anchor">
<h2>Dotted names and <code>##</code></h2>
</a>
</div>
<p>Occasionally an APL programmer wants to find all occurrences of the string <code>##.</code>. For example:</p>
<pre><code>##.MyClass.Fns 1       ⍝ Should be found
##.##.MyClass2.Fns2 1  ⍝ Should be found, too
#.MyClass.OtherFns 1   ⍝ Should NOT be found</code></pre>
<p>This can be achieved with this regular expression:</p>
<pre><code>##\.</code></pre>
<p>If you want to find all occurrences of <code>##.##.</code> but neither <code>#.</code> nor <code>##.##.##</code> etc then this would do:</p>
<pre><code>##\.##\.(?!#)</code></pre>
<p>If on the other hand you want to find all references to <code>#.</code> but <strong>not</strong> <code>##.</code> and <code>##.##</code> etc:</p>
<pre><code>(?&lt;![#.])#\.(?!#)</code></pre>
<div class="h_tag">
<a href="#10" id="10" class="autoheader_anchor">
<h3>Explanation</h3>
</a>
</div>
<p>Let's analyze <code>(?&lt;![#.])#\.(?!#)</code> :</p>
<ol start="1">
<li>The first thing a regular expression engine does is t look to the left of the current position. This is called  a look-behind. That's what <code>(?&lt;</code> is doing, together with the closing <code>)</code>.
<p>The <code>![#.]</code> part reads “neither a <code>.</code> nor a <code>#</code>”. Only when this condition is met would the RegEx engine carry on trying to find a match, otherwise it would give up and move one character forward and start to try again.</p></li>
<li>It then tries to find a match for <code>#</code>. Only if this is true would the RegEx engine keep trying.</li>
<li>It then tries to find a <code>#</code> at the current position.</li>
<li>If that succeeds it moves forward one character and then tries to find a dot.</li>
<li>If that's successfull the RegEx engine would perform a look-ahead. That means it looks one character ahead without actually moving the current position, no matter whether it's a match or not. It's the <code>(?</code> part (together with the closing <code>)</code>) that does this.
<p>The <code>!#! bit reads "is not a </code>#<code>.</code></p></li>
</ol>
<p>Only if all these checks are successful will the engine finally signal a hit.</p>
<div class="h_tag">
<a href="#1" id="1" class="autoheader_anchor">
<h3>Tests</h3>
</a>
</div>
<pre><code>      myRegEx←'(?&lt;![#.])#\.(?!#)'
      ⍴ myRegEx ⎕s 0 ⊣ '#.NS1.NS2.Fns 1'
1
      ⍴ myRegEx ⎕s 0 ⊣ '#.#.NS1.NS2.Fns 1'
0
      ⍴ myRegEx ⎕s 0 ⊣ '##.NS1.NS2.Fns 1'
0
      ⍴ myRegEx ⎕s 0 ⊣ '##.##.NS1.NS2.Fns 1'
0
      ⍴ myRegEx ⎕s 0 ⊣ '##.##.#.NS1.NS2.Fns 1'
0</code></pre>
<div class="h_tag">
<a href="#Finding-specific-numbers" id="Finding-specific-numbers" class="autoheader_anchor">
<h2>Finding specific numbers</h2>
</a>
</div>
<p>Imagine you want to search for a specific number like <code>123</code>. You don't want to find the negative version of if (<code>¯123</code>) but you want to find it at the beginning of a line as well as the end, and also as part of a word as in <code>abc123xyz</code>.</p>
<p>This can be achieved with this regular expression:</p>
<pre><code>'(?&lt;![0-9¯-])123([^0-9]|$)'⎕S 0 ⊣ data</code></pre>
<div class="h_tag">
<a href="#20" id="20" class="autoheader_anchor">
<h3>Explanation</h3>
</a>
</div>
<p>What is this doing:</p>
<ol start="1">
<li>When the regular expression engine checks a particular position first it does a look-behind, that is it looks to the character to the left of the current position. That's what <code>(?&lt;</code> is doing.</li>
<li>It then performs three checks defined by what's between the two square brackets:
<ul>
<li><code>0-9</code> stands for all digits from 0 to 9</li>
<li><code>¯</code> stands for itself: the APL character used to indicate a negative value.</li>
<li><code>-</code> stands for itself: the “normal” minus character.</li>
</ul>
<p>We add <code>¯</code> and <code>-</code> because we don't want to find any negative numbers.</p></li>
<li>We add a <code>!</code> because we need to negate the result of the checks.</li>
<li>If there is a match then the engine checks whether there is a <code>1</code> at the current position. If that's the case then it moves on to the next character and checks for a “2” etc. until it has matched the <code>3</code>.</li>
<li>Finally it checks whether the next character is either an end of line character (that's what the <code>$</code> stands for) or not a digit.</li>
</ol>
<div class="h_tag">
<a href="#2" id="2" class="autoheader_anchor">
<h3>Tests</h3>
</a>
</div>
<pre><code>      ⍴'(?&lt;![0-9¯-])123([^0-9]|$)'⎕S 0 ⊣ '123'
1
      ⍴'(?&lt;![0-9¯-])123([^0-9]|$)'⎕S 0 ⊣ ' 123'
1
      ⍴'(?&lt;![0-9¯-])123([^0-9]|$)'⎕S 0 ⊣ '123 '
1
      ⍴'(?&lt;![0-9¯-])123([^0-9]|$)'⎕S 0 ⊣ '123 123'
2
      ⍴'(?&lt;![0-9¯-])123([^0-9]|$)'⎕S 0 ⊣ '123 123 ¯123'
2
      ⍴'(?&lt;![0-9¯-])123([^0-9]|$)'⎕S 0 ⊣ '123 123 ¯123 123abc123'
4
      ⍴'(?&lt;![0-9¯-])123([^0-9]|$)'⎕S 0 ⊣'1234'
0</code></pre>
<div class="h_tag">
<a href="#Find-a-word" id="Find-a-word" class="autoheader_anchor">
<h2>Find a word</h2>
</a>
</div>
<p>If you look for “it” but you are not interested in “itself” and “initially” then you can use word boundaries: <code>\b</code>:</p>
<pre><code>      ⍴'\bit\b'⎕S 0 ⊣'This was it, initially. In itself it was...'
2</code></pre>
<p>However, by default word boundaries are defined by the ANSI character set. That means that it's not going to work in case Unicode characters are involved. For example:</p>
<pre><code>      ⍴'\bit\b'⎕S 0 ⊣'itßelf'
1</code></pre>
<p><code>ß</code> is a Unicode but not an ANSI character; it is therefore considered a word boundary by the RegEx engine. Luckily with version 16.0 a new version of the underlying PCRE library is shipped, and this version offers the option to use Unicode properties for word boundaries.</p>
<p>This new feature can be switched on and off with “UCP” option which was introduced in version 16.0:</p>
<pre><code>      ⍴'\bit\b'⎕S 0⍠('UCP' 1)⊣'itßelf'
0</code></pre>
<p>The default is 0 in order to make sure that the behaviour does not change but naturally when using the Unicode version of Dyalog you will almost certainly change it to 1.</p>
</body>
</html>